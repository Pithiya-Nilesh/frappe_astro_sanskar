import"./hoisted.114e0bd2.js";var N=document.getElementById("fileInput");N.addEventListener("change",e=>{z()});var V=document.getElementById("contact_form");V.addEventListener("submit",T);var o=document.querySelector('input[name="emailaddress"]');o.addEventListener("blur",F);function F(){const e=o.value.trim(),t=o.nextElementSibling;if(e===""){w(t),o.style.borderColor="";return}_(e)?(w(t),o.style.borderColor=""):(c(o),C(t,"Please enter a valid email address."))}const b="c9025a4d07020e1",q="78509ec3e33e18e";function c(e){e.style.borderColor!=="red"?e.style.borderColor="red":e.style.borderColor=""}function l(e){e.addEventListener("focus",()=>{e.style.borderColor=""})}function T(e){e.preventDefault(),grecaptcha.getResponse(),$();const t=document.querySelector('input[name="full_name"]'),r=document.querySelector('input[name="emailaddress"]'),u=document.querySelector('textarea[name="message"]'),f=document.querySelector('input[name="phone"]'),m=t.value.trim(),d=r.value.trim(),y=u.value.trim();if(f.value.trim(),l(t),l(r),l(u),l(f),m===""&&c(t),(d===""||!_(d))&&(c(r),C(r.nextElementSibling,"Please enter a valid email address.")),y===""&&c(u),m===""||d===""||y==="")return;const h=document.getElementById("fileInput").files[0],v=new URLSearchParams(window.location.search).get("page"),g=v||"",I=v?"Demo":"General";if(h){const a=new XMLHttpRequest,n="https://sanskar.frappe.cloud/api/method/upload_file";a.open("POST",n,!0),a.setRequestHeader("Accept","application/json"),a.onload=function(){if(a.status===200){var P=JSON.parse(a.response),j=P.message.file_url;const S=new FormData(e.target),s=Object.fromEntries(S.entries());S.set("data",JSON.stringify(s));var B=s.full_name,D=s.emailaddress,k=s.phone,A=s.message;fetch("https://sanskar.frappe.cloud/api/resource/Enquiry",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:`token ${b}:${q}`},body:JSON.stringify({first_name:B,email:D,phone:k,message:A,document:j,enquiry_source:"Website Enquiry",demo_for:g,query_type:I})}).then(p=>{p.status===200?window.location.href="/thank-you":alert("failed")}).catch(p=>{console.log(p)})}else alert("File upload failed. Please try again later.")},a.onerror=function(){alert("An error occurred while uploading the file.")};const i=new FormData;i.append("file",h),a.send(i),e.preventDefault()}else{const a=new FormData(e.target),n=Object.fromEntries(a.entries());a.set("data",JSON.stringify(n));var E=n.full_name,x=n.emailaddress,O=n.code+" "+n.phone,L=n.message;fetch("https://sanskar.frappe.cloud/api/resource/Enquiry",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:`token ${b}:${q}`},body:JSON.stringify({first_name:E,email:x,phone:O,message:L,enquiry_source:"Website Enquiry",demo_for:g,query_type:I})}).then(i=>{i.status===200?window.location.href="/thank-you":alert("failed")}).catch(i=>{console.log(i)})}}function _(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}function C(e,t){!e||!e.classList.contains("error-message")?(e=document.createElement("p"),e.textContent=t,e.classList.add("error-message"),e.style.color="red",e.style.fontSize="0.8rem",e.style.marginTop="0.2rem",e.style.marginBottom="0",o.parentNode.insertBefore(e,o.nextSibling)):e.textContent=t}function w(e){e&&e.classList.contains("error-message")&&e.remove()}function $(){const e=document.getElementById("recaptcha-error");e.style.display="none"}function z(){var e=document.getElementById("fileInput"),t=e.value,r=/(\.jpg|\.pdf|\.png|\.docx|\.txt)$/i;if(!r.exec(t))return alert("Invalid file type only allow .jpg | .pdf | .png | .docx | .txt"),e.value="",!1}
