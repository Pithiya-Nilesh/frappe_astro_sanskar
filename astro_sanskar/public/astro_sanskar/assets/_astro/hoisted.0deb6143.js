import"./hoisted.fb0f5850.js";var U=document.getElementById("fileInput");U.addEventListener("change",e=>{K()});var R=document.getElementById("contact_form");R.addEventListener("submit",H);var i=document.querySelector('input[name="emailaddress"]');i.addEventListener("blur",G);function G(){const e=i.value.trim(),t=i.nextElementSibling;if(e===""){B(t),i.style.borderColor="";return}J(e)?(B(t),i.style.borderColor=""):(S(i),$(t,"Please enter a valid email address."))}const T="c9025a4d07020e1",D="78509ec3e33e18e";function S(e){e.style.borderColor!=="red"?e.style.borderColor="red":e.style.borderColor=""}function w(e){e.addEventListener("focus",()=>{e.style.borderColor=""})}function H(e){e.preventDefault();const t=document.querySelector('input[name="full_name"]'),n=document.querySelector('input[name="emailaddress"]'),o=document.querySelector('textarea[name="message"]'),q=document.querySelector('input[name="phone"]'),p=t.value.trim(),c=n.value.trim(),m=o.value.trim();if(q.value.trim(),w(t),w(n),w(o),w(q),p===""&&S(t),(c===""||!J(c))&&(S(n),$(n.nextElementSibling,"Please enter a valid email address.")),m===""&&S(o),p===""||c===""||m==="")return;const y=document.getElementById("fileInput").files[0],s=new URLSearchParams(window.location.search).get("page"),h=s||"",g=s?"Demo":"General";if(y){const a=new XMLHttpRequest,l="https://sanskar.frappe.cloud/api/method/upload_file";a.open("POST",l,!0),a.setRequestHeader("Accept","application/json"),a.onload=function(){if(a.status===200){var v=JSON.parse(a.response),b=v.message.file_url;const N=new FormData(e.target),u=Object.fromEntries(N.entries());N.set("data",JSON.stringify(u));var r=u.full_name,P=u.emailaddress,k=u.phone,j=u.message;W().then(A=>{let{browserName:F,device:L}=V();fetch("https://sanskar.frappe.cloud/api/resource/Enquiry",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:`token ${T}:${D}`},body:JSON.stringify({first_name:r,email:P,phone:k,message:j,document:b,enquiry_source:"Website Enquiry",demo_for:h,query_type:g,ip:A,browser_name:F,device:L})}).then(f=>{f.status===200?window.location.href="/thank-you":(console.log("failed to post form",f),z(r,P,k,j,"Website Enquiry",h,g,A,F,L,f),alert("Failed to submit data. Please try after some time."))}).catch(f=>{console.log(f)})})}else alert("File upload failed. Please try again later.")},a.onerror=function(){alert("An error occurred while uploading the file.")};const d=new FormData;d.append("file",y),a.send(d),e.preventDefault()}else{const a=new FormData(e.target),l=Object.fromEntries(a.entries());a.set("data",JSON.stringify(l));var _=l.full_name,E=l.emailaddress,O=l.phone,C=l.message;W().then(d=>{let{browserName:v,device:b}=V();fetch("https://sanskar.frappe.cloud/api/resource/Enquiry",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:`token ${T}:${D}`},body:JSON.stringify({first_name:_,email:E,phone:O,message:C,enquiry_source:"Website Enquiry",demo_for:h,query_type:g,ip:d,browser_name:v,device:b})}).then(r=>{r.status===200?(console.log(r),window.location.href="/thank-you"):(console.log("failed to post form",r),z(_,E,O,C,"Website Enquiry",h,g,d,v,b,r),alert("Failed to submit data. Please try after some time."))}).catch(r=>{console.log("error",r)})})}}function J(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}function $(e,t){!e||!e.classList.contains("error-message")?(e=document.createElement("p"),e.textContent=t,e.classList.add("error-message"),e.style.color="red",e.style.fontSize="0.8rem",e.style.marginTop="0.2rem",e.style.marginBottom="0",i.parentNode.insertBefore(e,i.nextSibling)):e.textContent=t}function B(e){e&&e.classList.contains("error-message")&&e.remove()}function K(){var e=document.getElementById("fileInput"),t=e.value,n=/(\.jpg|\.pdf|\.png|\.docx|\.txt)$/i;if(!n.exec(t))return alert("Invalid file type only allow .jpg | .pdf | .png | .docx | .txt"),e.value="",!1}function V(){const e=navigator.userAgent;var t="Unknown";e.indexOf("Chrome")!==-1?t="Google Chrome":e.indexOf("Firefox")!==-1?t="Mozilla Firefox":e.indexOf("Safari")!==-1?t="Apple Safari":e.indexOf("Edg")!==-1?t="Microsoft Edge":(e.indexOf("MSIE")!==-1||e.indexOf("Trident")!==-1)&&(t="Internet Explorer");const n=window.innerWidth;var o="Unknown";return n<=576?o="Mobile":n<=992?o="Tablet":n<=1200?o="Laptop":o="Desktop",{browserName:t,device:o}}function W(){return fetch("https://api.ipify.org?format=json").then(e=>e.json()).then(e=>e.ip).catch(e=>(console.error("Error fetching IP address:",e),null))}function z(e="",t="",n="",o="",q="",p="",c="",m="",x="",y="",I=""){console.log("sending email notification..."),fetch("https://sanskartechnolab.com/api/method/astro_sanskar.api.send_form_failed_notification",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({full_name:e,email:t,phone:n,message:o,enquiry_source:"Website Enquiry",demoForValue:p,queryTypeValue:c,ip:m,browser_name:x,device:y,response:I,page_name:"Contact Us"})}).then(s=>{s.status===200?console.log("email notification sent."):(console.log("failed to send email notification",s),alert("We are unable to process your request. please send your requirements on info@sanskartechnolab.com"))}).catch(s=>{console.log("error",s)})}
