import"./hoisted.35da0890.js";let R;R=window.location.pathname.slice(1);console.log("Current URL:"+R);var G=document.getElementById("fileInput");G.addEventListener("change",e=>{Y()});var H=document.getElementById("contact_form");H.addEventListener("submit",Q);var c=document.querySelector('input[name="emailaddress"]');c.addEventListener("blur",K);function K(){const e=c.value.trim(),t=c.nextElementSibling;if(e===""){q(t),c.style.borderColor="";return}C(e)?(q(t),c.style.borderColor=""):(p(c),E(t,"Please enter a valid email address.",c))}var u=document.querySelector('input[name="full_name"]');u.addEventListener("blur",X);function X(){const e=u.value.trim(),t=u.nextElementSibling;if(e===""){q(t),u.style.borderColor="";return}x(e)?(q(t),u.style.borderColor=""):(p(u),E(t,"Please enter a valid name.",u))}const $="c9025a4d07020e1",V="78509ec3e33e18e";function p(e){e.style.borderColor!=="red"?e.style.borderColor="red":e.style.borderColor=""}function _(e){e.addEventListener("focus",()=>{e.style.borderColor=""})}function Q(e){e.preventDefault();const t=document.querySelector('input[name="full_name"]'),n=document.querySelector('input[name="emailaddress"]'),o=document.querySelector('textarea[name="message"]'),I=document.querySelector('input[name="phone"]'),d=t.value.trim(),i=n.value.trim(),y=o.value.trim();if(I.value.trim(),_(t),_(n),_(o),_(I),d===""&&p(t),(i===""||!C(i))&&(p(n),E(n.nextElementSibling,"Please enter a valid email address.",n)),y===""&&p(o),d===""||i===""||y==="")return;const h=document.getElementById("fileInput").files[0],s=new URLSearchParams(window.location.search).get("page"),g=s||"",v=s?"Demo":"General";if(h){if(C(i)&&x(d)){const a=new XMLHttpRequest,l="https://sanskar.frappe.cloud/api/method/upload_file";a.open("POST",l,!0),a.setRequestHeader("Accept","application/json"),a.onload=function(){if(a.status===200){var b=JSON.parse(a.response),w=b.message.file_url;const F=new FormData(e.target),m=Object.fromEntries(F.entries());F.set("data",JSON.stringify(m));var r=m.full_name,N=m.emailaddress,T=m.phone,D=m.message;J().then(U=>{let{browserName:z,device:B}=W();fetch("https://sanskar.frappe.cloud/api/resource/Enquiry",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:`token ${$}:${V}`},body:JSON.stringify({first_name:r,email:N,phone:T,message:D,document:w,enquiry_source:"Website Enquiry",demo_for:g,query_type:v,ip:U,browser_name:z,device:B,website_page_name:"Contact Us"})}).then(S=>{S.status===200?window.location.href="/thank-you":(console.log("failed to post form",S),Z(r,N,T,D,"Website Enquiry",g,v,U,z,B,"Contact Us"),alert("Failed to submit data. Please try after some time."))}).catch(S=>{console.log(S)})})}else alert("File upload failed. Please try again later.")},a.onerror=function(){alert("An error occurred while uploading the file.")};const f=new FormData;f.append("file",h),a.send(f),e.preventDefault()}}else if(C(i)&&x(d)){const a=new FormData(e.target),l=Object.fromEntries(a.entries());a.set("data",JSON.stringify(l));var k=l.full_name,A=l.emailaddress,L=l.phone,j=l.message;J().then(f=>{let{browserName:b,device:w}=W();fetch("https://sanskar.frappe.cloud/api/resource/Enquiry",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:`token ${$}:${V}`},body:JSON.stringify({first_name:k,email:A,phone:L,message:j,enquiry_source:"Website Enquiry",demo_for:g,query_type:v,ip:f,browser_name:b,device:w,website_page_name:"Contact Us"})}).then(r=>{r.status===200?(console.log(r),window.location.href="/thank-you"):(console.log("failed to post form",r),Z(k,A,L,j,"Website Enquiry",g,v,f,b,w,"Contact Us"),alert("Failed to submit data. Please try after some time."))}).catch(r=>{console.log("error",r)})})}}function C(e){return/^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$/.test(String(e).toLowerCase())}function x(e){return/^(?=(?:[^A-Za-z]*[A-Za-z]){2})(?![^\d~`?!^*¨ˆ;@=$%{}\[\]|\\\/<>#“.,]*[\d~`?!^*¨ˆ;@=$%{}\[\]|\\\/<>#“.,])\S+(?: \S+){0,2}$/.test(String(e).toLowerCase())}function E(e,t,n){!e||!e.classList.contains("error-message")?(e=document.createElement("p"),e.textContent=t,e.classList.add("error-message"),e.style.color="red",e.style.fontSize="0.8rem",e.style.marginTop="0.2rem",e.style.marginBottom="0",n.parentNode.insertBefore(e,n.nextSibling)):e.textContent=t}function q(e){e&&e.classList.contains("error-message")&&e.remove()}function Y(){var e=document.getElementById("fileInput"),t=e.value,n=/(\.jpg|\.pdf|\.png|\.docx|\.txt)$/i;if(!n.exec(t))return alert("Invalid file type only allow .jpg | .pdf | .png | .docx | .txt"),e.value="",!1}function W(){const e=navigator.userAgent;var t="Unknown";e.indexOf("Chrome")!==-1?t="Google Chrome":e.indexOf("Firefox")!==-1?t="Mozilla Firefox":e.indexOf("Safari")!==-1?t="Apple Safari":e.indexOf("Edg")!==-1?t="Microsoft Edge":(e.indexOf("MSIE")!==-1||e.indexOf("Trident")!==-1)&&(t="Internet Explorer");const n=window.innerWidth;var o="Unknown";return n<=576?o="Mobile":n<=992?o="Tablet":n<=1200?o="Laptop":o="Desktop",{browserName:t,device:o}}function J(){return fetch("https://api.ipify.org?format=json").then(e=>e.json()).then(e=>e.ip).catch(e=>(console.error("Error fetching IP address:",e),null))}function Z(e="",t="",n="",o="",I="",d="",i="",y="",O="",h="",P=""){console.log("sending email notification..."),fetch("https://sanskartechnolab.com/api/method/astro_sanskar.api.send_form_failed_notification",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({full_name:e,email:t,phone:n,message:o,enquiry_source:"Website Enquiry",demoForValue:d,queryTypeValue:i,ip:y,browser_name:O,device:h,response:P,page_name:"Contact Us"})}).then(s=>{s.status===200?console.log("email notification sent."):(console.log("failed to send email notification",s),alert("We are unable to process your request. please send your requirements on info@sanskartechnolab.com"))}).catch(s=>{console.log("error",s)})}
