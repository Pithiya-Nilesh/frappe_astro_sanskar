import"https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js";import"./hoisted.7d0eee59.js";var k=document.getElementById("fileInput");k.addEventListener("change",e=>{J()});var A=document.getElementById("contact_form");A.addEventListener("submit",$);var o=document.querySelector('input[name="emailaddress"]');o.addEventListener("blur",T);function T(){const e=o.value.trim(),t=o.nextElementSibling;if(e===""){_(t),o.style.borderColor="";return}E(e)?(_(t),o.style.borderColor=""):(m(o),C(t,"Please enter a valid email address."))}const S="c9025a4d07020e1",q="78509ec3e33e18e";function m(e){e.style.borderColor!=="red"?e.style.borderColor="red":e.style.borderColor=""}function d(e){e.addEventListener("focus",()=>{e.style.borderColor=""})}function $(e){e.preventDefault(),grecaptcha.getResponse(),z();const t=document.querySelector('input[name="full_name"]'),r=document.querySelector('input[name="emailaddress"]'),l=document.querySelector('textarea[name="message"]'),p=document.querySelector('input[name="phone"]'),f=t.value.trim(),c=r.value.trim(),y=l.value.trim();if(p.value.trim(),d(t),d(r),d(l),d(p),f===""&&m(t),(c===""||!E(c))&&(m(r),C(r.nextElementSibling,"Please enter a valid email address.")),y===""&&m(l),f===""||c===""||y==="")return;const h=document.getElementById("fileInput").files[0],v=new URLSearchParams(window.location.search).get("page"),g=v||"",b=v?"Demo":"General";if(h){const a=new XMLHttpRequest,n="https://sanskar.frappe.cloud/api/method/upload_file";a.open("POST",n,!0),a.setRequestHeader("Accept","application/json"),a.onload=function(){if(a.status===200){var L=JSON.parse(a.response),V=L.message.file_url;const I=new FormData(e.target),s=Object.fromEntries(I.entries());I.set("data",JSON.stringify(s));var j=s.full_name,B=s.emailaddress,D=s.phone,N=s.message;fetch("https://sanskar.frappe.cloud/api/resource/Enquiry",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:`token ${S}:${q}`},body:JSON.stringify({first_name:j,email:B,phone:D,message:N,document:V,enquiry_source:"Website Enquiry",demo_for:g,query_type:b})}).then(u=>{u.status===200?window.location.href="/thank-you":(alert("Failed to submit data. Please try after some time."),console.log("failed to post form",u),w())}).catch(u=>{console.log(u)})}else alert("File upload failed. Please try again later.")},a.onerror=function(){alert("An error occurred while uploading the file.")};const i=new FormData;i.append("file",h),a.send(i),e.preventDefault()}else{const a=new FormData(e.target),n=Object.fromEntries(a.entries());a.set("data",JSON.stringify(n));var x=n.full_name,P=n.emailaddress,O=n.code+" "+n.phone,F=n.message;fetch("https://sanskar.frappe.cloud/api/resource/Enquiry",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:`token ${S}:${q}`},body:JSON.stringify({first_name:x,email:P,phone:O,message:F,enquiry_source:"Website Enquiry",demo_for:g,query_type:b})}).then(i=>{i.status===200?window.location.href="/thank-you":(alert("Failed to submit data. Please try after some time."),console.log("failed to post form",i),w())}).catch(i=>{console.log("error",i)})}}function E(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}function C(e,t){!e||!e.classList.contains("error-message")?(e=document.createElement("p"),e.textContent=t,e.classList.add("error-message"),e.style.color="red",e.style.fontSize="0.8rem",e.style.marginTop="0.2rem",e.style.marginBottom="0",o.parentNode.insertBefore(e,o.nextSibling)):e.textContent=t}function _(e){e&&e.classList.contains("error-message")&&e.remove()}function z(){const e=document.getElementById("recaptcha-error");e.style.display="none"}function J(){var e=document.getElementById("fileInput"),t=e.value,r=/(\.jpg|\.pdf|\.png|\.docx|\.txt)$/i;if(!r.exec(t))return alert("Invalid file type only allow .jpg | .pdf | .png | .docx | .txt"),e.value="",!1}function w(e,t,r,l,p,f,c,y){console.log("send")}
